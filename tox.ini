[tox]
envlist = py{27,34,35,36},py36-doctest,py36-readme

[testenv]
deps =
  -rrequirements-tests.txt
passenv =
  LD_LIBRARY_PATH
  DYLD_LIBRARY_PATH
  C_INCLUDE_PATH
commands = {envpython} -m pytest --basetemp={envtmpdir} {posargs}

[testenv:doctest]
envdir = {toxworkdir}/py36
commands = {envpython} -m doctest README.rst

[testenv:readme]
envdir = {toxworkdir}/py36
deps = readme_renderer
skip_install = True
commands = {envpython} setup.py check -r -s
